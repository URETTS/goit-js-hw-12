{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '47590180-dc1d7afa62bd02f66448b190c';\n\nexport async function fetchImages(query, page = 1, perPage = 9) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`;\n    \n    const response = await axios.get(url);\n    \n    if (response.status !== 200) {\n        throw new Error('Failed to fetch images');\n    }\n\n    return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function renderGallery(images) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <a class=\"gallery-item\" href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p><b>Likes:</b> ${likes}</p>\n                <p><b>Views:</b> ${views}</p>\n                <p><b>Comments:</b> ${comments}</p>\n                <p><b>Downloads:</b> ${downloads}</p>\n            </div>\n        </a>\n    `).join('');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery-item', { captionsData: 'alt', captionDelay: 250 });\n    } else {\n        lightbox.refresh();\n    }\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n","console.log('main.js loaded');\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-container');\nconst input = document.querySelector('#search-input');\nconst gallery = document.createElement('div');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.classList.add('load-more');\nloadMoreBtn.style.display = 'none';\ndocument.body.append(gallery, loadMoreBtn);\n\ngallery.classList.add('gallery');\n\nlet query = '';\nlet page = 1;\n\nform.addEventListener('click', async (e) => {\n    e.preventDefault();\n    query = input.value.trim();\n\n    if (!query) {\n        iziToast.warning({ title: 'Warning', message: 'Please enter a search term!' });\n        return;\n    }\n\n    page = 1;\n    clearGallery();\n    loadMoreBtn.style.display = 'none';\n    showLoader();\n\n    try {\n        const data = await fetchImages(query, page);\n\n        if (data.hits.length === 0) {\n            iziToast.info({ title: 'Info', message: 'No images found. Try a different query!' });\n        } else {\n            renderGallery(data.hits);\n            loadMoreBtn.style.display = 'block';\n            if (page * 9 >= 36) {\n                loadMoreBtn.style.display = 'none';\n                iziToast.info({ title: 'Info', message: \"You've reached the end of search results.\" });\n            }\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again!' });\n    } finally {\n        hideLoader();\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    showLoader();\n\n    try {\n        const data = await fetchImages(query, page);\n\n        renderGallery(data.hits);\n        \n        if (page * 9 >= 36) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({ title: 'Info', message: \"You've reached the end of search results.\" });\n        }\n\n        smoothScroll();\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again!' });\n    } finally {\n        hideLoader();\n    }\n});\n\nfunction showLoader() {\n    const loader = document.createElement('div');\n    loader.classList.add('loader');\n    loader.textContent = 'Loading...';\n    document.body.append(loader);\n}\n\nfunction hideLoader() {\n    const loader = document.querySelector('.loader');\n    if (loader) loader.remove();\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document.querySelector('.gallery-item').getBoundingClientRect();\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","url","response","axios","lightbox","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","form","input","loadMoreBtn","iziToast","showLoader","data","hideLoader","smoothScroll","loader","cardHeight"],"mappings":"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"}