{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '47590180-dc1d7afa62bd02f66448b190c';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`;\n    \n    const response = await axios.get(url);\n    \n    if (response.status !== 200) {\n        throw new Error('Failed to fetch images');\n    }\n\n    return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function renderGallery(images) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <a class=\"gallery-item\" href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p><b>Likes:</b> ${likes}</p>\n                <p><b>Views:</b> ${views}</p>\n                <p><b>Comments:</b> ${comments}</p>\n                <p><b>Downloads:</b> ${downloads}</p>\n            </div>\n        </a>\n    `).join('');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery-item', { captionsData: 'alt', captionDelay: 250 });\n    } else {\n        lightbox.refresh();\n    }\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst form = document.querySelector('.search-container');\nconst input = document.querySelector('#search-input');\nconst gallery = document.createElement('div');\ngallery.classList.add('gallery');\ndocument.body.append(gallery);\n\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.classList.add('load-more');\nloadMoreBtn.style.display = 'none';\ndocument.body.append(loadMoreBtn);\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const query = input.value.trim();\n\n    if (!query) {\n        iziToast.warning({ title: 'Warning', message: 'Please enter a search term!' });\n        return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n    clearGallery();\n    loadMoreBtn.style.display = 'none';\n    showLoader();\n\n    try {\n        const data = await fetchImages(currentQuery, currentPage);\n\n        if (data.hits.length === 0) {\n            iziToast.info({ title: 'Info', message: 'No images found. Try another search!' });\n        } else {\n            renderGallery(data.hits);\n            if (currentPage * 15 < data.totalHits) loadMoreBtn.style.display = 'block';\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Failed to fetch images. Try again later!' });\n    } finally {\n        hideLoader();\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    showLoader(loadMoreBtn);\n\n    try {\n        const data = await fetchImages(currentQuery, currentPage);\n\n        renderGallery(data.hits);\n\n        if (currentPage * 15 >= data.totalHits) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n\n        smoothScroll();\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Failed to load more images. Try again later!' });\n    } finally {\n        hideLoader(loadMoreBtn);\n    }\n});\n\nfunction showLoader(button = document.body) {\n    const loader = document.createElement('div');\n    loader.classList.add('loader');\n    loader.textContent = 'Loading...';\n    button.append(loader);\n}\n\nfunction hideLoader(button = document.body) {\n    const loader = button.querySelector('.loader');\n    if (loader) loader.remove();\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document.querySelector('.gallery-item').getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","url","response","axios","lightbox","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","currentPage","currentQuery","form","input","loadMoreBtn","e","iziToast","showLoader","data","hideLoader","smoothScroll","button","loader","cardHeight"],"mappings":"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"}